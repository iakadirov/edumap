# Architecture Decision Records (ADR) — EduMap.uz

> Здесь записываем все важные технические и архитектурные решения.
> Это помогает помнить ПОЧЕМУ мы что-то сделали.

---

## ADR-001: Supabase как Backend

**Дата**: Декабрь 2024
**Статус**: Принято

### Контекст
Нужно выбрать как хранить данные и делать авторизацию.

### Варианты
1. **Свой бэкенд (Node.js + PostgreSQL)** — полный контроль, но много работы
2. **Firebase** — хорошо для мобильных, но NoSQL
3. **Supabase** — PostgreSQL + Auth + Storage из коробки

### Решение
Используем **Supabase**

### Причины
- PostgreSQL (реляционная БД, подходит для нашей структуры)
- Auth из коробки (email, OAuth)
- Бесплатный тариф достаточен для MVP
- Ускоряет разработку в 3-5 раз
- Row Level Security для безопасности

### Последствия
- Зависимость от Supabase
- При большом росте может потребоваться миграция
- Меньше контроля над инфраструктурой

---

## ADR-002: Next.js App Router

**Дата**: Декабрь 2024
**Статус**: Принято

### Контекст
Выбор фреймворка для фронтенда.

### Варианты
1. **React SPA** — просто, но плохой SEO
2. **Next.js Pages Router** — проверенный, но устаревающий
3. **Next.js App Router** — современный, но новый

### Решение
Используем **Next.js 14 с App Router**

### Причины
- Отличный SEO (важно для каталога)
- Server Components (быстрее загрузка)
- Современный подход
- Хорошая интеграция с Vercel
- Много документации и примеров

### Последствия
- Некоторые паттерны ещё не устоялись
- Нужно следить за обновлениями

---

## ADR-003: Начинаем только со школ

**Дата**: Декабрь 2024
**Статус**: Принято

### Контекст
У нас 5 вертикалей (школы, вузы, детсады, центры, курсы).
Нужно решить с чего начать.

### Решение
MVP = **только каталог школ**

### Причины
- Самый понятный рынок
- Легче собрать данные
- Быстрее получить обратную связь
- Валидация идеи перед масштабированием

### Последствия
- Другие вертикали ждут
- Архитектура должна быть расширяемой
- Риск что пользователи будут ждать другие вертикали

---

## ADR-004: Простая структура (не монорепо)

**Дата**: Декабрь 2024
**Статус**: Принято

### Контекст
Как организовать код проекта.

### Варианты
1. **Монорепо с packages/** — масштабируемо, но сложно
2. **Микрофронтенды** — гибко, но overkill
3. **Один проект Next.js** — просто, достаточно для MVP

### Решение
**Один проект Next.js** с логичной структурой папок

### Причины
- Соло-разработка
- Меньше инфраструктурной сложности
- Быстрее двигаться
- Можно рефакторить позже

### Последствия
- При росте команды нужен будет рефакторинг
- Меньше изоляции между модулями

---

## ADR-005: shadcn/ui для UI компонентов

**Дата**: Декабрь 2024
**Статус**: Принято

### Контекст
Выбор UI библиотеки.

### Варианты
1. **Material UI** — полная, но тяжёлая
2. **Chakra UI** — хорошая, но специфичная
3. **shadcn/ui** — копируемые компоненты, Tailwind

### Решение
Используем **shadcn/ui**

### Причины
- Компоненты копируются в проект (полный контроль)
- Построен на Tailwind (уже используем)
- Красивый современный дизайн
- Лёгкий и кастомизируемый
- Radix UI под капотом (accessibility)

### Последствия
- Нужно самим обновлять компоненты
- Меньше "из коробки" чем MUI

---

## ADR-006: TypeScript строгий режим

**Дата**: Декабрь 2024
**Статус**: Принято

### Решение
Используем TypeScript с `strict: true`

### Причины
- Меньше ошибок
- Лучше автокомплит
- Claude пишет лучший код с типами
- Самодокументирующийся код

---

## Шаблон для новых решений

```markdown
## ADR-XXX: [Название]

**Дата**: 
**Статус**: Предложено / Принято / Отклонено / Устарело

### Контекст
[Какую проблему решаем]

### Варианты
1. **Вариант 1** — описание
2. **Вариант 2** — описание

### Решение
[Что выбрали]

### Причины
- Причина 1
- Причина 2

### Последствия
- Последствие 1
- Последствие 2
```

---

*Добавляй новые решения по мере их принятия*
