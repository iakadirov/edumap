# UI/UX: Каталог школ — Фильтры

> **Страница**: `/schools`
> **Версия**: 1.0
> **Дата**: Декабрь 2024

---

## 1. Обзор страницы

### Цель страницы
Помочь родителям найти подходящие школы по их критериям быстро и удобно.

### Ключевые сценарии использования

```
Сценарий 1: "Конкретный запрос"
Родитель знает что хочет: район, бюджет, язык
→ Быстро задать 3-4 фильтра и получить список

Сценарий 2: "Исследование"  
Родитель изучает рынок, не знает критериев
→ Смотрит все школы, постепенно сужает

Сценарий 3: "Сравнение"
Родитель выбирает между несколькими школами
→ Добавить в сравнение, открыть сравнительную таблицу
```

---

## 2. Приоритеты фильтров

### Иерархия по важности для родителей

```
КРИТИЧЕСКИ ВАЖНЫЕ (решают, подходит ли школа вообще):
├── 1. Район/Локация — "Далеко не повезу каждый день"
├── 2. Стоимость — "Сколько могу платить"
├── 3. Классы (возраст) — "Примут ли моего ребёнка"
└── 4. Язык обучения — "На каком языке учиться"

ВАЖНЫЕ (для сравнения подходящих школ):
├── 5. Учебная программа — "Cambridge или национальная"
├── 6. Рейтинг — "Насколько хорошая школа"
└── 7. Тип школы — "Частная или международная"

ДОПОЛНИТЕЛЬНЫЕ (уточняющие):
├── 8. Транспорт — "Есть ли развозка"
├── 9. Питание — "Кормят ли детей"
├── 10. Продлёнка — "Могу ли оставить до вечера"
├── 11. Размер классов — "Сколько детей в классе"
└── 12. Дополнительно — "Бассейн, кружки, спорт"
```

### Таблица приоритетов

| Приоритет | Фильтр | Всегда виден | UI элемент |
|-----------|--------|--------------|------------|
| 1 | Район | ✅ | Multi-select dropdown |
| 2 | Цена | ✅ | Range slider |
| 3 | Класс | ✅ | Single dropdown |
| 4 | Язык | ✅ | Toggle chips |
| 5 | Программа | В группе | Multi-select chips |
| 6 | Рейтинг | В группе | Radio + stars |
| 7 | Тип школы | В группе | Chips |
| 8 | Транспорт | В группе | Toggle |
| 9 | Питание | В группе | Toggle |
| 10 | Продлёнка | В группе | Toggle |
| 11+ | Расширенные | Скрыты | Разные |

---

## 3. Группировка фильтров

### Группа 1: ОСНОВНЫЕ (всегда видны)

| Фильтр | UI элемент | Обоснование |
|--------|------------|-------------|
| **Район** | Multi-select dropdown с поиском | Родители часто рассматривают 2-3 соседних района |
| **Цена** | Range slider (от — до) | Интуитивно, видно диапазон рынка |
| **Классы** | Dropdown "Класс поступления" | Простой выбор: "Иду в 1 класс" |
| **Язык обучения** | Chips (toggle) | Быстрый выбор, обычно 1-2 варианта |

### Группа 2: ПРОГРАММА И КАЧЕСТВО (раскрывающаяся секция)

| Фильтр | UI элемент | Обоснование |
|--------|------------|-------------|
| **Программа** | Multi-select chips | Cambridge, IB, Национальная — можно несколько |
| **Рейтинг** | Star rating (от X и выше) | "Показать только 4+ звезды" |
| **Тип школы** | Chips | Частная / Международная / Гос. с углублением |

### Группа 3: УСЛУГИ (раскрывающаяся секция)

| Фильтр | UI элемент | Обоснование |
|--------|------------|-------------|
| **Транспорт** | Toggle (есть/неважно) | Бинарный выбор |
| **Питание** | Toggle | Бинарный |
| **Продлёнка** | Toggle | Бинарный |

### Группа 4: РАСШИРЕННЫЕ (скрыты по умолчанию)

| Фильтр | UI элемент | Обоснование |
|--------|------------|-------------|
| **Размер класса** | Dropdown | "До 15", "До 20", "До 25" |
| **Иностранные языки** | Multi-select | Английский, китайский, корейский... |
| **Инфраструктура** | Checkboxes | Бассейн, спортзал, лаборатории |
| **Подготовка к экзаменам** | Checkboxes | IELTS, SAT, DTM |

---

## 4. Детальный дизайн каждого фильтра

### 4.1 Район (Location)

**Тип**: Multi-select dropdown с поиском

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Район                             ▼     │
├─────────────────────────────────────────┤
│ 🔍 Поиск района...                      │
├─────────────────────────────────────────┤
│ ☑ Яккасарайский              (15)      │
│ ☑ Мирзо-Улугбекский          (23)      │
│ ☐ Юнусабадский               (18)      │
│ ☐ Чиланзарский               (12)      │
│ ☐ Сергелийский               (8)       │
│ ☐ Учтепинский                (6)       │
│ ☐ Шайхантахурский            (5)       │
│ ☐ Алмазарский                (7)       │
│ ☐ Бектемирский               (3)       │
│ ☐ Мирабадский                (9)       │
│ ☐ Яшнабадский                (4)       │
│ ☐ Олмазорский                (5)       │
└─────────────────────────────────────────┘

Выбрано: [Яккасарайский ×] [Мирзо-Улугбекский ×]
```

**Поведение**:
- Multi-select с чекбоксами
- Поиск по названию района
- Показывает количество школ в каждом районе в скобках
- Выбранные районы показываются как chips под dropdown
- Клик на × удаляет район из выбора
- Максимум: без ограничений

**Данные**:
```typescript
const districts = [
  { id: 'yakkasaray', name: 'Яккасарайский', name_uz: 'Yakkasaroy', count: 15 },
  { id: 'mirzo_ulugbek', name: 'Мирзо-Улугбекский', name_uz: 'Mirzo Ulug\'bek', count: 23 },
  { id: 'yunusabad', name: 'Юнусабадский', name_uz: 'Yunusobod', count: 18 },
  { id: 'chilanzar', name: 'Чиланзарский', name_uz: 'Chilonzor', count: 12 },
  { id: 'sergeli', name: 'Сергелийский', name_uz: 'Sergeli', count: 8 },
  { id: 'uchtepa', name: 'Учтепинский', name_uz: 'Uchtepa', count: 6 },
  { id: 'shaykhantakhur', name: 'Шайхантахурский', name_uz: 'Shayxontohur', count: 5 },
  { id: 'almazar', name: 'Алмазарский', name_uz: 'Olmazor', count: 7 },
  { id: 'bektemir', name: 'Бектемирский', name_uz: 'Bektemir', count: 3 },
  { id: 'mirabad', name: 'Мирабадский', name_uz: 'Mirobod', count: 9 },
  { id: 'yashnabad', name: 'Яшнабадский', name_uz: 'Yashnobod', count: 4 },
  { id: 'olmazar', name: 'Олмазорский', name_uz: 'Olmazor', count: 5 },
];
```

**URL параметр**: `?district=yakkasaray,mirzo_ulugbek`

---

### 4.2 Стоимость (Price)

**Тип**: Dual-handle range slider

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Стоимость в месяц                       │
├─────────────────────────────────────────┤
│                                         │
│  1 млн ●━━━━━━━━━━━━━━━● 15 млн        │
│        ├───────────────┤                │
│        ▲               ▲                │
│       мин             макс              │
│                                         │
│  от [2 000 000]  до [7 000 000] сум    │
│                                         │
│  ☐ Показать в USD ($180 - $630)        │
│                                         │
└─────────────────────────────────────────┘
```

**Поведение**:
- Dual-handle range slider
- Минимум и максимум определяются данными рынка
- Можно ввести точные значения в input поля
- Чекбокс для переключения UZS ↔ USD
- Шаг слайдера: 500 000 сум
- При изменении — мгновенная фильтрация (debounce 300ms)

**Форматирование**:
```typescript
// Отображение цены
function formatPrice(value: number, currency: 'UZS' | 'USD'): string {
  if (currency === 'UZS') {
    if (value >= 1_000_000) {
      return `${(value / 1_000_000).toFixed(1)} млн`;
    }
    return value.toLocaleString('ru-RU');
  } else {
    const usdValue = Math.round(value / 12500); // примерный курс
    return `$${usdValue}`;
  }
}
```

**URL параметр**: `?price_min=2000000&price_max=7000000`

---

### 4.3 Класс поступления (Grade)

**Тип**: Single-select dropdown

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Класс поступления                 ▼     │
├─────────────────────────────────────────┤
│ ○ Любой класс                           │
│ ─────────────────────────────────────   │
│   ДОШКОЛЬНОЕ                            │
│ ○ Подготовка к школе (5-6 лет)         │
│ ─────────────────────────────────────   │
│   НАЧАЛЬНАЯ ШКОЛА                       │
│ ● 1 класс (6-7 лет)                    │
│ ○ 2 класс                               │
│ ○ 3 класс                               │
│ ○ 4 класс                               │
│ ─────────────────────────────────────   │
│   СРЕДНЯЯ ШКОЛА                         │
│ ○ 5 класс (10-11 лет)                  │
│ ○ 6 класс                               │
│ ○ 7 класс                               │
│ ─────────────────────────────────────   │
│   СТАРШАЯ ШКОЛА                         │
│ ○ 8 класс                               │
│ ○ 9 класс                               │
│ ○ 10 класс (15-16 лет)                 │
│ ○ 11 класс                              │
└─────────────────────────────────────────┘
```

**Поведение**:
- Single-select (radio buttons внутри dropdown)
- Группировка по ступеням образования
- Показывает примерный возраст для ключевых классов
- По умолчанию: "Любой класс"

**Данные**:
```typescript
const gradeOptions = [
  { value: 'any', label: 'Любой класс', group: null },
  { value: 'preschool', label: 'Подготовка к школе', age: '5-6 лет', group: 'preschool' },
  { value: '1', label: '1 класс', age: '6-7 лет', group: 'primary' },
  { value: '2', label: '2 класс', group: 'primary' },
  { value: '3', label: '3 класс', group: 'primary' },
  { value: '4', label: '4 класс', group: 'primary' },
  { value: '5', label: '5 класс', age: '10-11 лет', group: 'middle' },
  { value: '6', label: '6 класс', group: 'middle' },
  { value: '7', label: '7 класс', group: 'middle' },
  { value: '8', label: '8 класс', group: 'high' },
  { value: '9', label: '9 класс', group: 'high' },
  { value: '10', label: '10 класс', age: '15-16 лет', group: 'high' },
  { value: '11', label: '11 класс', group: 'high' },
];

const gradeGroups = {
  preschool: 'Дошкольное',
  primary: 'Начальная школа',
  middle: 'Средняя школа',
  high: 'Старшая школа',
};
```

**URL параметр**: `?grade=1`

---

### 4.4 Язык обучения (Language)

**Тип**: Toggle chips (multi-select)

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Язык обучения                           │
├─────────────────────────────────────────┤
│                                         │
│  [ Русский ✓ ]  [ Узбекский ]  [ English ]
│                                         │
└─────────────────────────────────────────┘

Состояния chip:
┌─────────────┐  ┌─────────────┐
│  Русский    │  │ Русский ✓  │
│  (inactive) │  │  (active)   │
│  outline    │  │  filled     │
└─────────────┘  └─────────────┘
```

**Поведение**:
- Multi-select chips
- Клик переключает состояние
- Если ничего не выбрано = показать все
- Визуальное различие: inactive (outline) / active (filled + checkmark)

**Данные**:
```typescript
const languages = [
  { id: 'russian', label: 'Русский', label_short: 'Рус' },
  { id: 'uzbek', label: 'Узбекский', label_short: 'Узб' },
  { id: 'english', label: 'English', label_short: 'Eng' },
];
```

**URL параметр**: `?language=russian,english`

---

### 4.5 Учебная программа (Curriculum)

**Тип**: Multi-select chips с tooltips

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Программа                               │
├─────────────────────────────────────────┤
│                                         │
│  [ Cambridge ✓ ]  [ IB ]  [ Национальная+ ]
│                                         │
│  [ American ]  [ Смешанная ]            │
│                                         │
└─────────────────────────────────────────┘

Tooltip при hover на "Cambridge":
┌─────────────────────────────────────────┐
│ Cambridge International                 │
│ ─────────────────────────────────────   │
│ Британская программа с международным   │
│ признанием. Включает IGCSE и A-Level.  │
│ Экзамены проводятся глобально.         │
└─────────────────────────────────────────┘
```

**Поведение**:
- Multi-select chips
- Tooltip с описанием при hover (desktop) / long press (mobile)
- Если ничего не выбрано = показать все

**Данные**:
```typescript
const curriculums = [
  { 
    id: 'cambridge', 
    label: 'Cambridge',
    description: 'Британская программа с международным признанием. Включает IGCSE и A-Level.'
  },
  { 
    id: 'ib', 
    label: 'IB',
    description: 'International Baccalaureate. Развивает критическое мышление и международное понимание.'
  },
  { 
    id: 'national_plus', 
    label: 'Национальная+',
    description: 'Усиленная национальная программа с дополнительными предметами.'
  },
  { 
    id: 'american', 
    label: 'American',
    description: 'Американская программа. Подготовка к SAT, AP курсы.'
  },
  { 
    id: 'mixed', 
    label: 'Смешанная',
    description: 'Комбинация национальной и международной программ.'
  },
];
```

**URL параметр**: `?curriculum=cambridge,ib`

---

### 4.6 Рейтинг (Rating)

**Тип**: Radio buttons со звёздами

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Минимальный рейтинг                     │
├─────────────────────────────────────────┤
│                                         │
│  ○ ★★★★★  Только 5 звёзд    (8)        │
│  ○ ★★★★☆  4 и выше          (24)       │
│  ● ★★★☆☆  3 и выше          (67)   ←   │
│  ○ ★★☆☆☆  2 и выше          (89)       │
│  ○ ☆☆☆☆☆  Любой рейтинг     (95)       │
│                                         │
└─────────────────────────────────────────┘
```

**Поведение**:
- Radio buttons (single select)
- Показывает количество школ для каждого уровня
- Звёзды визуально заполнены до выбранного уровня
- По умолчанию: "Любой рейтинг"

**Данные**:
```typescript
const ratingOptions = [
  { value: 5, label: 'Только 5 звёзд', stars: 5 },
  { value: 4, label: '4 и выше', stars: 4 },
  { value: 3, label: '3 и выше', stars: 3 },
  { value: 2, label: '2 и выше', stars: 2 },
  { value: 0, label: 'Любой рейтинг', stars: 0 },
];
```

**URL параметр**: `?rating_min=3`

---

### 4.7 Тип школы (School Type)

**Тип**: Single/Multi-select chips

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Тип школы                               │
├─────────────────────────────────────────┤
│                                         │
│  [ Частная ✓ ]  [ Международная ]       │
│                                         │
│  [ Государственная+ ]                   │
│                                         │
└─────────────────────────────────────────┘
```

**Данные**:
```typescript
const schoolTypes = [
  { id: 'private', label: 'Частная' },
  { id: 'international', label: 'Международная' },
  { id: 'state_enhanced', label: 'Государственная+' },
];
```

**URL параметр**: `?type=private,international`

---

### 4.8 Услуги (Services)

**Тип**: Toggle switches

**Wireframe**:
```
┌─────────────────────────────────────────┐
│ Услуги                                  │
├─────────────────────────────────────────┤
│                                         │
│  🚌 Транспорт       [ ○━━━ ]  неважно  │
│                                         │
│  🍽️ Питание         [ ━━━● ]  есть     │
│                                         │
│  🕐 Продлёнка       [ ○━━━ ]  неважно  │
│                                         │
└─────────────────────────────────────────┘
```

**Поведение**:
- Toggle switch (on/off)
- Off = показать все школы (неважно есть ли услуга)
- On = показать только школы с этой услугой
- Иконки для визуального распознавания

**URL параметр**: `?has_transport=true&has_meals=true`

---

### 4.9 Расширенные фильтры

#### Размер класса
```
┌─────────────────────────────────────────┐
│ Максимальный размер класса        ▼     │
├─────────────────────────────────────────┤
│ ○ Любой                                 │
│ ○ До 12 учеников (камерные)            │
│ ○ До 15 учеников                        │
│ ● До 20 учеников                        │
│ ○ До 25 учеников                        │
└─────────────────────────────────────────┘
```

#### Иностранные языки (дополнительные)
```
┌─────────────────────────────────────────┐
│ Дополнительные языки                    │
├─────────────────────────────────────────┤
│ ☐ Китайский                             │
│ ☐ Корейский                             │
│ ☐ Немецкий                              │
│ ☐ Французский                           │
│ ☐ Арабский                              │
│ ☐ Японский                              │
└─────────────────────────────────────────┘
```

#### Инфраструктура
```
┌─────────────────────────────────────────┐
│ Инфраструктура                          │
├─────────────────────────────────────────┤
│ ☐ Бассейн                               │
│ ☐ Футбольное поле                       │
│ ☐ Спортзал                              │
│ ☐ Научные лаборатории                   │
│ ☐ IT-лаборатория / STEM                 │
│ ☐ Библиотека                            │
│ ☐ Актовый зал                           │
└─────────────────────────────────────────┘
```

#### Подготовка к экзаменам
```
┌─────────────────────────────────────────┐
│ Подготовка к экзаменам                  │
├─────────────────────────────────────────┤
│ ☐ IELTS                                 │
│ ☐ TOEFL                                 │
│ ☐ SAT                                   │
│ ☐ DTM                                   │
│ ☐ Cambridge Exams                       │
└─────────────────────────────────────────┘
```

---

## 5. Layout страницы

### 5.1 Desktop Layout (≥1024px)

```
┌────────────────────────────────────────────────────────────────────────────┐
│  HEADER (навигация)                                                        │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 🔍 Поиск школы по названию...                              [Найти]   │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ Район ▼         Цена ▼          Класс ▼        Язык обучения         │ │
│  │ [Все районы]    [1-15 млн]      [Любой]        [Рус] [Узб] [Eng]     │ │
│  │                                                                       │ │
│  │ + Программа и качество    + Услуги    + Расширенные     [Сбросить]   │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ Найдено: 47 школ          │ Сортировка: [По рейтингу ▼] │ 🗺️ Карта   │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌─────────────────────────────┐  ┌─────────────────────────────┐         │
│  │      КАРТОЧКА ШКОЛЫ 1       │  │      КАРТОЧКА ШКОЛЫ 2       │         │
│  │                             │  │                             │         │
│  └─────────────────────────────┘  └─────────────────────────────┘         │
│                                                                             │
│  ┌─────────────────────────────┐  ┌─────────────────────────────┐         │
│  │      КАРТОЧКА ШКОЛЫ 3       │  │      КАРТОЧКА ШКОЛЫ 4       │         │
│  │                             │  │                             │         │
│  └─────────────────────────────┘  └─────────────────────────────┘         │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │                    [ 1 ] [ 2 ] [ 3 ] ... [ 12 ]  [Далее →]            │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
├────────────────────────────────────────────────────────────────────────────┤
│  FOOTER                                                                    │
└────────────────────────────────────────────────────────────────────────────┘
```

### 5.2 Mobile Layout (<768px)

```
┌─────────────────────────────┐
│  HEADER                     │
├─────────────────────────────┤
│                             │
│  🔍 Поиск школы...          │
│                             │
├─────────────────────────────┤
│                             │
│  [🎚️ Фильтры (3)] [↕️ Сорт] │
│                             │
├─────────────────────────────┤
│  Найдено: 47 школ    🗺️     │
├─────────────────────────────┤
│                             │
│  ┌───────────────────────┐  │
│  │   КАРТОЧКА ШКОЛЫ 1    │  │
│  │                       │  │
│  └───────────────────────┘  │
│                             │
│  ┌───────────────────────┐  │
│  │   КАРТОЧКА ШКОЛЫ 2    │  │
│  │                       │  │
│  └───────────────────────┘  │
│                             │
│  ┌───────────────────────┐  │
│  │   КАРТОЧКА ШКОЛЫ 3    │  │
│  │                       │  │
│  └───────────────────────┘  │
│                             │
│  [ Загрузить ещё ]          │
│                             │
├─────────────────────────────┤
│  FOOTER                     │
└─────────────────────────────┘
```

### 5.3 Mobile: Bottom Sheet фильтров

```
┌─────────────────────────────┐
│  Фильтры              [✕]   │
├─────────────────────────────┤
│                             │
│  ▼ Район                    │
│    [Яккасарайский ×]        │
│    [Мирзо-Улугбекский ×]    │
│    + Добавить район         │
│  ─────────────────────────  │
│                             │
│  ▼ Стоимость                │
│    от 2 млн до 7 млн сум    │
│    ●━━━━━━━━━━━●            │
│  ─────────────────────────  │
│                             │
│  ▼ Класс поступления        │
│    1 класс                  │
│  ─────────────────────────  │
│                             │
│  ▼ Язык обучения            │
│    [Рус ✓] [Узб] [Eng]      │
│  ─────────────────────────  │
│                             │
│  ▶ Программа и качество     │
│  ▶ Услуги                   │
│  ▶ Расширенные фильтры      │
│                             │
├─────────────────────────────┤
│ [Сбросить]   [Показать 47]  │
└─────────────────────────────┘
```

---

## 6. Поведение и взаимодействие

### 6.1 Мгновенная фильтрация

```typescript
// Каждое изменение фильтра запускает фильтрацию
// с debounce для предотвращения лишних запросов

const DEBOUNCE_DELAY = 300; // ms

function onFilterChange(filterName: string, value: any) {
  // Обновить URL
  updateUrlParams({ [filterName]: value });
  
  // Debounced запрос к API
  debouncedFetchSchools();
  
  // Обновить счётчик
  updateResultsCount();
}
```

### 6.2 Сохранение в URL

```typescript
// Пример URL с фильтрами:
// /schools?district=yakkasaray,yunusabad&price_min=2000000&price_max=7000000&grade=1&language=russian&curriculum=cambridge&rating_min=3&has_transport=true

interface FilterParams {
  district?: string[];      // district=yakkasaray,yunusabad
  price_min?: number;       // price_min=2000000
  price_max?: number;       // price_max=7000000
  grade?: string;           // grade=1
  language?: string[];      // language=russian,english
  curriculum?: string[];    // curriculum=cambridge,ib
  type?: string[];          // type=private,international
  rating_min?: number;      // rating_min=3
  has_transport?: boolean;  // has_transport=true
  has_meals?: boolean;      // has_meals=true
  has_extended_day?: boolean;
  max_class_size?: number;
  extra_languages?: string[];
  infrastructure?: string[];
  exam_prep?: string[];
  sort?: string;            // sort=rating_desc
  page?: number;            // page=1
}
```

### 6.3 Пустые результаты

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                    😕                                       │
│                                                             │
│         По вашему запросу школ не найдено                  │
│                                                             │
│         Попробуйте изменить фильтры:                       │
│         • Расширить ценовой диапазон                       │
│         • Добавить соседние районы                         │
│         • Снизить требования к рейтингу                    │
│                                                             │
│                  [Сбросить все фильтры]                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 6.4 Быстрые фильтры (популярные запросы)

```
┌─────────────────────────────────────────────────────────────┐
│  Популярные запросы:                                        │
│                                                             │
│  [Cambridge в Юнусабаде]  [До 3 млн сум]  [С бассейном]    │
│  [Английский язык]  [Подготовка к IELTS]                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 7. Сортировка результатов

### Варианты сортировки

```typescript
const sortOptions = [
  { value: 'rating_desc', label: 'По рейтингу (высокий →)', default: true },
  { value: 'rating_asc', label: 'По рейтингу (низкий →)' },
  { value: 'price_asc', label: 'По цене (дешевле →)' },
  { value: 'price_desc', label: 'По цене (дороже →)' },
  { value: 'reviews_desc', label: 'По количеству отзывов' },
  { value: 'popularity', label: 'По популярности' },
  { value: 'distance', label: 'По расстоянию', requiresGeolocation: true },
];
```

### Wireframe сортировки

```
┌─────────────────────────────┐
│ Сортировка              ▼   │
├─────────────────────────────┤
│ ● По рейтингу (высокий →)  │
│ ○ По рейтингу (низкий →)   │
│ ○ По цене (дешевле →)      │
│ ○ По цене (дороже →)       │
│ ○ По количеству отзывов    │
│ ○ По популярности          │
│ ─────────────────────────  │
│ ○ По расстоянию 📍         │
│   (требуется геолокация)   │
└─────────────────────────────┘
```

---

## 8. Состояния компонентов

### 8.1 Состояния фильтров

| Состояние | Визуал | Описание |
|-----------|--------|----------|
| Default | Outline, серый текст | Фильтр не активен |
| Active | Filled, цветной | Фильтр применён |
| Hover | Подсветка | Курсор наведён |
| Disabled | Серый, opacity 50% | Недоступен |
| Loading | Spinner | Загрузка данных |

### 8.2 Состояния страницы

```
LOADING:
┌─────────────────────────────────────────┐
│  ▓▓▓▓▓▓▓▓░░░░░░░░░░░░ Загрузка...      │
│                                         │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐ │
│  │ ░░░░░░░ │  │ ░░░░░░░ │  │ ░░░░░░░ │ │
│  │ ░░░░░░░ │  │ ░░░░░░░ │  │ ░░░░░░░ │ │
│  │ ░░░░░░░ │  │ ░░░░░░░ │  │ ░░░░░░░ │ │
│  └─────────┘  └─────────┘  └─────────┘ │
└─────────────────────────────────────────┘

ERROR:
┌─────────────────────────────────────────┐
│              ⚠️ Ошибка                  │
│                                         │
│  Не удалось загрузить список школ.     │
│  Проверьте подключение к интернету.    │
│                                         │
│           [Попробовать снова]           │
└─────────────────────────────────────────┘
```

---

## 9. Accessibility (a11y)

### Требования

- Все фильтры доступны с клавиатуры (Tab navigation)
- ARIA labels для всех интерактивных элементов
- Достаточный цветовой контраст (WCAG AA)
- Screen reader совместимость
- Focus visible для всех элементов

### Примеры ARIA

```html
<!-- Dropdown фильтра -->
<div role="combobox" aria-label="Выберите район" aria-expanded="false">
  <button aria-haspopup="listbox">Район</button>
  <ul role="listbox" aria-label="Список районов">
    <li role="option" aria-selected="true">Яккасарайский</li>
    <li role="option" aria-selected="false">Юнусабадский</li>
  </ul>
</div>

<!-- Счётчик результатов -->
<div role="status" aria-live="polite">
  Найдено: 47 школ
</div>
```

---

## 10. Технические требования

### API Endpoint

```typescript
GET /api/schools

Query Parameters:
- district: string[] (comma-separated)
- price_min: number
- price_max: number
- grade: string
- language: string[]
- curriculum: string[]
- type: string[]
- rating_min: number
- has_transport: boolean
- has_meals: boolean
- has_extended_day: boolean
- max_class_size: number
- extra_languages: string[]
- infrastructure: string[]
- exam_prep: string[]
- sort: string
- page: number
- limit: number (default: 12)

Response:
{
  data: School[],
  meta: {
    total: number,
    page: number,
    limit: number,
    totalPages: number
  },
  filters: {
    districts: { id: string, name: string, count: number }[],
    priceRange: { min: number, max: number },
    // ... counts for each filter option
  }
}
```

### Performance

- Debounce фильтрации: 300ms
- Pagination: 12 школ на страницу
- Infinite scroll на мобильных
- Skeleton loading для карточек
- Cache filter counts

---

*Версия 1.0 — Декабрь 2024*
