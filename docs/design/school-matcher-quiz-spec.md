# 📋 AI School Matcher — Детальная спецификация анкеты

> **Модуль**: School Matcher Quiz
> **Связан с**: school-matcher-system.md
> **Версия**: 1.0
> **Дата**: Декабрь 2024

---

## 1. Общие правила дизайна анкеты

### 1.1 UX принципы

| Принцип | Реализация |
|---------|------------|
| **Простота** | Максимум 4 варианта ответа на вопрос |
| **Прогресс** | Всегда видно сколько осталось |
| **Гибкость** | Можно пропустить необязательные вопросы |
| **Обратная связь** | Мгновенная реакция на выбор |
| **Уважение к времени** | Не более 7 минут на всю анкету |

### 1.2 Типы вопросов

```
ТИПЫ UI ЭЛЕМЕНТОВ:
──────────────────────────────────────────────────────────────────

1. SINGLE CHOICE (Radio cards)
   - Для взаимоисключающих вариантов
   - Большие кликабельные карточки
   - Иконка + текст + подпись

2. MULTIPLE CHOICE (Checkbox cards/chips)
   - Для множественного выбора
   - Группировка по категориям
   - Ограничение на количество (если нужно)

3. RANGE SLIDER
   - Для числовых диапазонов (бюджет)
   - Показывает мгновенную статистику

4. SCALE SLIDER
   - Для предпочтений "от-до"
   - Визуальные метки на концах

5. RANKING (Drag & Drop)
   - Для расстановки приоритетов
   - Нумерация автоматически

6. DROPDOWN + CHIPS
   - Для выбора из большого списка
   - Выбранные показываются как chips

7. OPTIONAL TEXT
   - Для дополнительных комментариев
   - Всегда необязательный
```

### 1.3 Визуальные состояния

```css
/* Карточка варианта ответа */

/* Default */
.option-card {
  background: #FFFFFF;
  border: 1px solid #E5E7EB;
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

/* Hover */
.option-card:hover {
  border-color: #3B82F6;
  background: #F8FAFC;
}

/* Selected */
.option-card.selected {
  border: 2px solid #3B82F6;
  background: #EFF6FF;
}

/* Selected checkmark */
.option-card.selected::after {
  content: '✓';
  position: absolute;
  top: 12px;
  right: 12px;
  color: #3B82F6;
  font-weight: bold;
}
```

---

## 2. Полная спецификация вопросов

---

### Вопрос 1: Класс поступления

**Секция**: О ребёнке
**Тип**: Dropdown с группировкой
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     👶 В какой класс планируете поступление?                               │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │  Выберите класс                                            ▼   │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     Dropdown открыт:                                                        │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │  ДОШКОЛЬНОЕ                                                     │   │
│     │  ○ Подготовка к школе (5-6 лет)                                │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │  НАЧАЛЬНАЯ ШКОЛА                                                │   │
│     │  ○ 1 класс (6-7 лет)                                           │   │
│     │  ○ 2 класс                                                      │   │
│     │  ○ 3 класс                                                      │   │
│     │  ○ 4 класс                                                      │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │  СРЕДНЯЯ ШКОЛА                                                  │   │
│     │  ○ 5 класс (10-11 лет)                                         │   │
│     │  ○ 6 класс                                                      │   │
│     │  ○ 7 класс                                                      │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │  СТАРШАЯ ШКОЛА                                                  │   │
│     │  ○ 8 класс                                                      │   │
│     │  ○ 9 класс                                                      │   │
│     │  ○ 10 класс (15-16 лет)                                        │   │
│     │  ○ 11 класс                                                     │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     💡 Совет: Выберите класс, в который ребёнок пойдёт                     │
│        в следующем учебном году                                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const gradeOptions = [
  {
    group: 'preschool',
    groupLabel: 'Дошкольное',
    options: [
      { value: 'prep', label: 'Подготовка к школе', age: '5-6 лет' }
    ]
  },
  {
    group: 'primary',
    groupLabel: 'Начальная школа',
    options: [
      { value: '1', label: '1 класс', age: '6-7 лет' },
      { value: '2', label: '2 класс', age: null },
      { value: '3', label: '3 класс', age: null },
      { value: '4', label: '4 класс', age: null },
    ]
  },
  {
    group: 'middle',
    groupLabel: 'Средняя школа',
    options: [
      { value: '5', label: '5 класс', age: '10-11 лет' },
      { value: '6', label: '6 класс', age: null },
      { value: '7', label: '7 класс', age: null },
    ]
  },
  {
    group: 'high',
    groupLabel: 'Старшая школа',
    options: [
      { value: '8', label: '8 класс', age: null },
      { value: '9', label: '9 класс', age: null },
      { value: '10', label: '10 класс', age: '15-16 лет' },
      { value: '11', label: '11 класс', age: null },
    ]
  }
];
```

#### Влияние на алгоритм

| Значение | Эффект |
|----------|--------|
| Выбранный класс | Фильтрует школы, принимающие в этот класс |
| Группа класса | Влияет на рекомендуемые программы |

---

### Вопрос 2: Характер ребёнка

**Секция**: О ребёнке
**Тип**: Single Choice (Radio cards)
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     🧒 Какой характер у вашего ребёнка?                                    │
│                                                                             │
│     Это поможет подобрать школу с подходящей атмосферой                    │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │                                                           │  │   │
│     │  │  🌟  Активный и общительный                              │  │   │
│     │  │                                                           │  │   │
│     │  │  Легко заводит друзей, любит быть в центре внимания,     │  │   │
│     │  │  энергичный, предпочитает командные активности           │  │   │
│     │  │                                                           │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │                                                           │  │   │
│     │  │  📚  Спокойный и вдумчивый                               │  │   │
│     │  │                                                           │  │   │
│     │  │  Предпочитает небольшой круг близких друзей,             │  │   │
│     │  │  любит сосредоточенную работу, вдумчивый                 │  │   │
│     │  │                                                           │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │                                                           │  │   │
│     │  │  ⚖️  Адаптивный                                          │  │   │
│     │  │                                                           │  │   │
│     │  │  Легко подстраивается под ситуацию, может быть           │  │   │
│     │  │  и активным, и спокойным в зависимости от обстоятельств  │  │   │
│     │  │                                                           │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │  🤔  Затрудняюсь ответить                                │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const characterOptions = [
  {
    value: 'extrovert',
    icon: '🌟',
    label: 'Активный и общительный',
    description: 'Легко заводит друзей, любит быть в центре внимания, энергичный, предпочитает командные активности',
    matchCriteria: {
      preferLargeClasses: true,
      preferCompetitive: true,
      preferTeamSports: true
    }
  },
  {
    value: 'introvert',
    icon: '📚',
    label: 'Спокойный и вдумчивый',
    description: 'Предпочитает небольшой круг близких друзей, любит сосредоточенную работу, вдумчивый',
    matchCriteria: {
      preferSmallClasses: true,
      preferIndividualApproach: true,
      preferQuietEnvironment: true
    }
  },
  {
    value: 'adaptive',
    icon: '⚖️',
    label: 'Адаптивный',
    description: 'Легко подстраивается под ситуацию, может быть и активным, и спокойным',
    matchCriteria: {
      neutral: true
    }
  },
  {
    value: 'unsure',
    icon: '🤔',
    label: 'Затрудняюсь ответить',
    description: null,
    matchCriteria: {
      skipCriterion: true
    }
  }
];
```

#### Влияние на алгоритм

| Значение | Эффект на рекомендации |
|----------|------------------------|
| extrovert | +вес школам с большими классами, активной внеклассной жизнью |
| introvert | +вес школам с маленькими классами, индивидуальным подходом |
| adaptive | Нейтральный вес по этому критерию |
| unsure | Критерий игнорируется |

---

### Вопрос 3: Интересы ребёнка

**Секция**: О ребёнке
**Тип**: Multiple Choice (Chips с группировкой)
**Обязательный**: ❌ Нет (но рекомендуется)
**Минимум**: 0
**Максимум**: 10

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     🎯 Чем увлекается ваш ребёнок?                                         │
│                                                                             │
│     Выберите все подходящие варианты (это поможет найти школы              │
│     с нужными кружками и секциями)                                         │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  📚 АКАДЕМИЧЕСКОЕ                                                │   │
│     │                                                                  │   │
│     │  ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐   │   │
│     │  │  🔬   │ │  📐   │ │  💻   │ │  🌍   │ │  📖   │ │  🧪   │   │   │
│     │  │       │ │       │ │       │ │       │ │       │ │       │   │   │
│     │  │ Науки │ │Матем. │ │  IT   │ │Языки  │ │Чтение │ │Химия  │   │   │
│     │  │   ✓   │ │       │ │   ✓   │ │       │ │       │ │       │   │   │
│     │  └───────┘ └───────┘ └───────┘ └───────┘ └───────┘ └───────┘   │   │
│     │                                                                  │   │
│     │  ⚽ СПОРТ                                                        │   │
│     │                                                                  │   │
│     │  ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐   │   │
│     │  │  ⚽   │ │  🏊   │ │  🥋   │ │  🎾   │ │  ♟️   │ │  🏀   │   │   │
│     │  │       │ │       │ │       │ │       │ │       │ │       │   │   │
│     │  │Футбол │ │Плаван.│ │Единоб.│ │Теннис │ │Шахматы│ │Баскет.│   │   │
│     │  │       │ │   ✓   │ │       │ │       │ │   ✓   │ │       │   │   │
│     │  └───────┘ └───────┘ └───────┘ └───────┘ └───────┘ └───────┘   │   │
│     │                                                                  │   │
│     │  🎨 ТВОРЧЕСТВО                                                   │   │
│     │                                                                  │   │
│     │  ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐             │   │
│     │  │  🎨   │ │  🎵   │ │  🎭   │ │  💃   │ │  📷   │             │   │
│     │  │       │ │       │ │       │ │       │ │       │             │   │
│     │  │Рисов. │ │Музыка │ │Театр  │ │Танцы  │ │Фото   │             │   │
│     │  │       │ │       │ │       │ │       │ │       │             │   │
│     │  └───────┘ └───────┘ └───────┘ └───────┘ └───────┘             │   │
│     │                                                                  │   │
│     │  🔧 ТЕХНИЧЕСКОЕ                                                  │   │
│     │                                                                  │   │
│     │  ┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐                       │   │
│     │  │  🤖   │ │  🎮   │ │  ✈️   │ │  🔌   │                       │   │
│     │  │       │ │       │ │       │ │       │                       │   │
│     │  │Роботех│ │GameDev│ │Дроны  │ │Электр.│                       │   │
│     │  │       │ │       │ │       │ │       │                       │   │
│     │  └───────┘ └───────┘ └───────┘ └───────┘                       │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────┐      │   │
│     │  │ + Другое: [                                     ]     │      │   │
│     │  └───────────────────────────────────────────────────────┘      │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     Выбрано: 4 интереса                         [Пропустить]              │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const interestOptions = {
  academic: {
    label: 'Академическое',
    icon: '📚',
    options: [
      { value: 'science', icon: '🔬', label: 'Науки', tags: ['physics', 'biology', 'stem'] },
      { value: 'math', icon: '📐', label: 'Математика', tags: ['math_olympiad', 'advanced_math'] },
      { value: 'it', icon: '💻', label: 'IT / Программирование', tags: ['coding', 'computer_science'] },
      { value: 'languages', icon: '🌍', label: 'Иностранные языки', tags: ['english', 'multilingual'] },
      { value: 'reading', icon: '📖', label: 'Чтение / Литература', tags: ['library', 'book_club'] },
      { value: 'chemistry', icon: '🧪', label: 'Химия', tags: ['lab', 'chemistry_olympiad'] },
    ]
  },
  sports: {
    label: 'Спорт',
    icon: '⚽',
    options: [
      { value: 'football', icon: '⚽', label: 'Футбол', tags: ['football_field', 'team_sports'] },
      { value: 'swimming', icon: '🏊', label: 'Плавание', tags: ['pool', 'swimming_team'] },
      { value: 'martial_arts', icon: '🥋', label: 'Единоборства', tags: ['taekwondo', 'judo', 'karate'] },
      { value: 'tennis', icon: '🎾', label: 'Теннис', tags: ['tennis_court'] },
      { value: 'chess', icon: '♟️', label: 'Шахматы', tags: ['chess_club', 'mind_sports'] },
      { value: 'basketball', icon: '🏀', label: 'Баскетбол', tags: ['basketball_court', 'team_sports'] },
    ]
  },
  creative: {
    label: 'Творчество',
    icon: '🎨',
    options: [
      { value: 'art', icon: '🎨', label: 'Рисование', tags: ['art_studio', 'visual_arts'] },
      { value: 'music', icon: '🎵', label: 'Музыка', tags: ['music_room', 'orchestra', 'choir'] },
      { value: 'theater', icon: '🎭', label: 'Театр', tags: ['drama_club', 'auditorium'] },
      { value: 'dance', icon: '💃', label: 'Танцы', tags: ['dance_studio', 'choreography'] },
      { value: 'photo', icon: '📷', label: 'Фото/Видео', tags: ['media_club', 'journalism'] },
    ]
  },
  technical: {
    label: 'Техническое',
    icon: '🔧',
    options: [
      { value: 'robotics', icon: '🤖', label: 'Робототехника', tags: ['robotics_lab', 'stem'] },
      { value: 'gamedev', icon: '🎮', label: 'Разработка игр', tags: ['coding', 'game_design'] },
      { value: 'drones', icon: '✈️', label: 'Дроны / Авиамодели', tags: ['tech_club'] },
      { value: 'electronics', icon: '🔌', label: 'Электроника', tags: ['maker_space', 'stem'] },
    ]
  }
};
```

#### Влияние на алгоритм

```typescript
// Для каждого интереса проверяем наличие в школе
function calculateInterestMatch(childInterests: string[], schoolActivities: string[]): number {
  const matched = childInterests.filter(interest => 
    interestOptions[interest].tags.some(tag => schoolActivities.includes(tag))
  );
  return matched.length / childInterests.length; // 0.0 - 1.0
}
```

---

### Вопрос 4: Языковой профиль

**Секция**: О ребёнке
**Тип**: Multi-select с уровнями
**Обязательный**: ✅ Да (хотя бы один язык)

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     🗣️ Какие языки знает ваш ребёнок и на каком уровне?                   │
│                                                                             │
│     Отметьте все языки и укажите примерный уровень                         │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  ☑ Русский язык                                                 │   │
│     │     ┌────────────────────────────────────────────────────────┐  │   │
│     │     │  ○ Начальный  ● Свободный  ○ Родной                   │  │   │
│     │     └────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │                                                                  │   │
│     │  ☑ Узбекский язык                                               │   │
│     │     ┌────────────────────────────────────────────────────────┐  │   │
│     │     │  ● Начальный  ○ Свободный  ○ Родной                   │  │   │
│     │     └────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │                                                                  │   │
│     │  ☑ Английский язык                                              │   │
│     │     ┌────────────────────────────────────────────────────────┐  │   │
│     │     │  ● Начальный  ○ Свободный  ○ Родной                   │  │   │
│     │     └────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │                                                                  │   │
│     │  ☐ Другой язык                                                  │   │
│     │     [Какой? ________________]                                    │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     💡 Уровень языка влияет на рекомендуемый язык обучения                │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const languageOptions = [
  { 
    id: 'russian', 
    label: 'Русский язык',
    levels: [
      { value: 'beginner', label: 'Начальный', description: 'Понимает, но говорит с трудом' },
      { value: 'fluent', label: 'Свободный', description: 'Говорит и понимает хорошо' },
      { value: 'native', label: 'Родной', description: 'Основной язык общения' }
    ]
  },
  { 
    id: 'uzbek', 
    label: 'Узбекский язык',
    levels: [
      { value: 'beginner', label: 'Начальный' },
      { value: 'fluent', label: 'Свободный' },
      { value: 'native', label: 'Родной' }
    ]
  },
  { 
    id: 'english', 
    label: 'Английский язык',
    levels: [
      { value: 'beginner', label: 'Начальный', description: 'Только начинает изучать' },
      { value: 'fluent', label: 'Свободный', description: 'Может учиться на английском' },
      { value: 'native', label: 'Родной', description: 'Как родной язык' }
    ]
  }
];

// Формат сохранения
interface LanguageProfile {
  russian?: 'beginner' | 'fluent' | 'native';
  uzbek?: 'beginner' | 'fluent' | 'native';
  english?: 'beginner' | 'fluent' | 'native';
  other?: { name: string; level: string };
}
```

#### Влияние на алгоритм

| Языковой профиль | Рекомендации |
|------------------|--------------|
| Русский native + English beginner | Русскоязычные школы с хорошей программой английского |
| English fluent/native | Международные школы с обучением на английском |
| Узбекский native | Школы с узбекским языком обучения |
| Мультиязычный | Билингвальные программы |

---

### Вопрос 5: Особенности обучения (опционально)

**Секция**: О ребёнке
**Тип**: Multiple Choice (опционально)
**Обязательный**: ❌ Нет
**Деликатный**: ⚠️ Да (требует тактичной формулировки)

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     📋 Есть ли у ребёнка особенности, которые стоит учесть?                │
│                                                                             │
│     Это поможет найти школы с подходящими условиями.                       │
│     Информация конфиденциальна.                                            │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  ☐ Высокая академическая одарённость                           │   │
│     │    Ребёнок опережает сверстников, нужна усиленная программа    │   │
│     │                                                                  │   │
│     │  ☐ Требуется дополнительное внимание к концентрации            │   │
│     │    Сложно долго сидеть на месте, нужен особый подход           │   │
│     │                                                                  │   │
│     │  ☐ Особенности чтения/письма                                    │   │
│     │    Нужна школа с опытом работы с дислексией                    │   │
│     │                                                                  │   │
│     │  ☐ Требуется адаптационный период                               │   │
│     │    Ребёнок долго привыкает к новому, нужна мягкая адаптация    │   │
│     │                                                                  │   │
│     │  ☐ Другое                                                       │   │
│     │    [Опишите кратко: _________________________________]          │   │
│     │                                                                  │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │                                                                  │   │
│     │  ☐ Нет особенностей                                             │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     🔒 Эта информация используется только для подбора школы               │
│        и не передаётся третьим лицам                                       │
│                                                                             │
│                                                [Пропустить вопрос]         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const specialNeedsOptions = [
  {
    value: 'gifted',
    label: 'Высокая академическая одарённость',
    description: 'Ребёнок опережает сверстников, нужна усиленная программа',
    matchTags: ['advanced_program', 'gifted_support', 'olympiad_prep']
  },
  {
    value: 'attention',
    label: 'Требуется дополнительное внимание к концентрации',
    description: 'Сложно долго сидеть на месте, нужен особый подход',
    matchTags: ['small_classes', 'individual_approach', 'adhd_friendly']
  },
  {
    value: 'dyslexia',
    label: 'Особенности чтения/письма',
    description: 'Нужна школа с опытом работы с дислексией',
    matchTags: ['learning_support', 'special_education', 'dyslexia_support']
  },
  {
    value: 'adaptation',
    label: 'Требуется адаптационный период',
    description: 'Ребёнок долго привыкает к новому, нужна мягкая адаптация',
    matchTags: ['gentle_adaptation', 'psychologist', 'supportive_environment']
  },
  {
    value: 'other',
    label: 'Другое',
    hasTextField: true
  },
  {
    value: 'none',
    label: 'Нет особенностей',
    exclusive: true  // снимает все остальные выборы
  }
];
```

---

### Вопрос 6: Главная цель образования

**Секция**: Образовательные цели
**Тип**: Single Choice (Radio cards)
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     🎓 Какая главная цель образования для вашего ребёнка?                  │
│                                                                             │
│     Это определит, какой тип школы мы будем рекомендовать                  │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │                                                           │  │   │
│     │  │  🌍  Подготовка к зарубежному университету               │  │   │
│     │  │                                                           │  │   │
│     │  │  США, Великобритания, Европа, Азия                       │  │   │
│     │  │  Важны: международные экзамены (SAT, IELTS),             │  │   │
│     │  │  аккредитованные программы (Cambridge, IB)               │  │   │
│     │  │                                                           │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │                                                           │  │   │
│     │  │  🏛️  Подготовка к ВУЗу в Узбекистане                     │  │   │
│     │  │                                                           │  │   │
│     │  │  Сильная подготовка к DTM, олимпиадам                    │  │   │
│     │  │  Фокус на национальную программу                         │  │   │
│     │  │                                                           │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │                                                           │  │   │
│     │  │  🌱  Всестороннее развитие личности                      │  │   │
│     │  │                                                           │  │   │
│     │  │  Баланс академики, спорта, творчества                    │  │   │
│     │  │  Развитие soft skills, критического мышления             │  │   │
│     │  │                                                           │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │                                                           │  │   │
│     │  │  🤔  Ещё не определились                                 │  │   │
│     │  │                                                           │  │   │
│     │  │  Хотим качественное образование, но пока без             │  │   │
│     │  │  конкретного фокуса на будущее                           │  │   │
│     │  │                                                           │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const educationGoalOptions = [
  {
    value: 'abroad',
    icon: '🌍',
    label: 'Подготовка к зарубежному университету',
    description: 'США, Великобритания, Европа, Азия. Важны международные экзамены и аккредитованные программы.',
    matchCriteria: {
      preferInternational: true,
      preferCurriculum: ['cambridge', 'ib', 'american'],
      preferExamPrep: ['ielts', 'toefl', 'sat'],
      weight: { international_recognition: 1.5 }
    }
  },
  {
    value: 'local',
    icon: '🏛️',
    label: 'Подготовка к ВУЗу в Узбекистане',
    description: 'Сильная подготовка к DTM, олимпиадам. Фокус на национальную программу.',
    matchCriteria: {
      preferCurriculum: ['national_plus', 'national'],
      preferExamPrep: ['dtm'],
      preferOlympiad: true,
      weight: { dtm_results: 1.5 }
    }
  },
  {
    value: 'holistic',
    icon: '🌱',
    label: 'Всестороннее развитие личности',
    description: 'Баланс академики, спорта, творчества. Развитие soft skills.',
    matchCriteria: {
      preferExtracurricular: true,
      preferBalance: true,
      weight: { activities_variety: 1.3 }
    }
  },
  {
    value: 'undecided',
    icon: '🤔',
    label: 'Ещё не определились',
    description: 'Хотим качественное образование, но пока без конкретного фокуса.',
    matchCriteria: {
      neutral: true,
      preferHighRating: true
    }
  }
];
```

---

### Вопрос 7: Академичность vs Комфорт

**Секция**: Образовательные цели
**Тип**: Scale Slider
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     ⚖️ Что важнее в школе?                                                 │
│                                                                             │
│     Передвиньте ползунок ближе к тому, что вам важнее                      │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │                                                                  │   │
│     │    📊 Высокие                              💚 Психологический   │   │
│     │       требования                              комфорт ребёнка   │   │
│     │                                                                  │   │
│     │    Строгая дисциплина                      Мягкий подход        │   │
│     │    Конкурентная среда                      Поддержка и забота   │   │
│     │    Высокая нагрузка                        Без стресса          │   │
│     │                                                                  │   │
│     │                                                                  │   │
│     │         ○━━━━━━━━━━━━━━━●━━━━━━━━━━━━━━━━○                      │   │
│     │         │               │                │                      │   │
│     │     Строгость      Баланс         Комфорт                       │   │
│     │                                                                  │   │
│     │                                                                  │   │
│     │    ┌────────────────────────────────────────────────────────┐   │   │
│     │    │  💡 Вы выбрали: Баланс строгости и комфорта           │   │   │
│     │    │     Школы с хорошими результатами и заботой           │   │   │
│     │    │     о благополучии учеников                            │   │   │
│     │    └────────────────────────────────────────────────────────┘   │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const academicComfortScale = {
  min: 0,
  max: 100,
  default: 50,
  labels: {
    0: {
      title: 'Максимальная строгость',
      description: 'Высокие требования, конкуренция, интенсивная нагрузка'
    },
    25: {
      title: 'Строгость с поддержкой',
      description: 'Высокие ожидания, но с помощью педагогов'
    },
    50: {
      title: 'Баланс',
      description: 'Хорошие результаты и забота о благополучии'
    },
    75: {
      title: 'Комфорт с развитием',
      description: 'Мягкий подход, но с мотивацией к учёбе'
    },
    100: {
      title: 'Максимальный комфорт',
      description: 'Психологическое благополучие — приоритет'
    }
  }
};

// Влияние на алгоритм
function calculateAcademicFit(sliderValue: number, school: School): number {
  // sliderValue 0 = strict, 100 = comfort
  const schoolRigor = school.academicRigor; // 0-100 scale
  const difference = Math.abs(sliderValue - schoolRigor);
  return 1 - (difference / 100); // 1.0 = perfect match
}
```

---

### Вопрос 8: Предпочитаемая программа

**Секция**: Образовательные цели
**Тип**: Single Choice с опцией "неважно"
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     📚 Какая учебная программа предпочтительна?                            │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │  🇬🇧 Cambridge International                              │  │   │
│     │  │                                                           │  │   │
│     │  │  Британская программа. IGCSE, A-Level. Признаётся        │  │   │
│     │  │  университетами по всему миру.                           │  │   │
│     │  │                                                  [?]     │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │  🌐 International Baccalaureate (IB)                      │  │   │
│     │  │                                                           │  │   │
│     │  │  Швейцарская программа. Развивает критическое            │  │   │
│     │  │  мышление. Высокие требования.                           │  │   │
│     │  │                                                  [?]     │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │  🇺🇸 American Curriculum                                  │  │   │
│     │  │                                                           │  │   │
│     │  │  Американская система. AP курсы, подготовка к SAT.       │  │   │
│     │  │  Идеально для поступления в США.                         │  │   │
│     │  │                                                  [?]     │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │  🇺🇿 Национальная+ (усиленная)                           │  │   │
│     │  │                                                           │  │   │
│     │  │  Гос. программа с дополнениями. Углублённые предметы,    │  │   │
│     │  │  подготовка к DTM и олимпиадам.                          │  │   │
│     │  │                                                  [?]     │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     │  ┌───────────────────────────────────────────────────────────┐  │   │
│     │  │  🔄 Неважно / Покажите разные варианты                   │  │   │
│     │  │     Хочу сравнить школы с разными программами            │  │   │
│     │  └───────────────────────────────────────────────────────────┘  │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     [?] — нажмите для подробной информации о программе                     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Popup при нажатии [?]

```
┌─────────────────────────────────────────────────────────────────┐
│  🇬🇧 Cambridge International Education                    [×]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Британская международная программа, разработанная             │
│  Кембриджским университетом.                                    │
│                                                                 │
│  ЭТАПЫ:                                                         │
│  • Primary (6-11 лет)                                           │
│  • Secondary / IGCSE (12-16 лет)                               │
│  • A-Level (16-18 лет)                                          │
│                                                                 │
│  ПРЕИМУЩЕСТВА:                                                  │
│  ✓ Признаётся университетами по всему миру                     │
│  ✓ Структурированная программа с чёткими целями                │
│  ✓ Экзамены проводятся глобально в одно время                  │
│                                                                 │
│  ПОДХОДИТ ДЛЯ:                                                  │
│  • Планирующих обучение в Великобритании, ЕС, Азии             │
│  • Тех, кто ценит структуру и стандарты                        │
│                                                                 │
│  В ТАШКЕНТЕ:                                                    │
│  12 школ с Cambridge аккредитацией                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Вопрос 9: Расстановка приоритетов

**Секция**: Образовательные цели
**Тип**: Drag & Drop Ranking
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     📊 Расставьте приоритеты по важности                                   │
│                                                                             │
│     Перетащите пункты так, чтобы самое важное было сверху                  │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │   1  ┌──────────────────────────────────────────────────────┐   │   │
│     │      │  ☰  📚 Качество образования                         │   │   │
│     │      │      Сильные учителя, высокие результаты            │   │   │
│     │      └──────────────────────────────────────────────────────┘   │   │
│     │                             ↕                                    │   │
│     │   2  ┌──────────────────────────────────────────────────────┐   │   │
│     │      │  ☰  📍 Удобное расположение                         │   │   │
│     │      │      Близко к дому или работе                       │   │   │
│     │      └──────────────────────────────────────────────────────┘   │   │
│     │                             ↕                                    │   │
│     │   3  ┌──────────────────────────────────────────────────────┐   │   │
│     │      │  ☰  💰 Доступная стоимость                          │   │   │
│     │      │      В рамках семейного бюджета                     │   │   │
│     │      └──────────────────────────────────────────────────────┘   │   │
│     │                             ↕                                    │   │
│     │   4  ┌──────────────────────────────────────────────────────┐   │   │
│     │      │  ☰  🌍 Международная программа                      │   │   │
│     │      │      Cambridge, IB или American                     │   │   │
│     │      └──────────────────────────────────────────────────────┘   │   │
│     │                             ↕                                    │   │
│     │   5  ┌──────────────────────────────────────────────────────┐   │   │
│     │      │  ☰  🏊 Инфраструктура и кружки                      │   │   │
│     │      │      Бассейн, спортзал, секции                      │   │   │
│     │      └──────────────────────────────────────────────────────┘   │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     💡 Эти приоритеты влияют на порядок рекомендаций                      │
│                                                                             │
│     [Сбросить порядок]                                                     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const priorityOptions = [
  {
    id: 'quality',
    icon: '📚',
    label: 'Качество образования',
    description: 'Сильные учителя, высокие результаты',
    defaultPosition: 1,
    algorithmWeight: 'rating_weight'
  },
  {
    id: 'location',
    icon: '📍',
    label: 'Удобное расположение',
    description: 'Близко к дому или работе',
    defaultPosition: 2,
    algorithmWeight: 'location_weight'
  },
  {
    id: 'price',
    icon: '💰',
    label: 'Доступная стоимость',
    description: 'В рамках семейного бюджета',
    defaultPosition: 3,
    algorithmWeight: 'price_weight'
  },
  {
    id: 'curriculum',
    icon: '🌍',
    label: 'Международная программа',
    description: 'Cambridge, IB или American',
    defaultPosition: 4,
    algorithmWeight: 'curriculum_weight'
  },
  {
    id: 'infrastructure',
    icon: '🏊',
    label: 'Инфраструктура и кружки',
    description: 'Бассейн, спортзал, секции',
    defaultPosition: 5,
    algorithmWeight: 'infrastructure_weight'
  }
];

// Конвертация позиции в вес
function positionToWeight(position: number, total: number): number {
  // Position 1 = highest weight, Position 5 = lowest weight
  return (total - position + 1) / total;
  // 1 → 1.0, 2 → 0.8, 3 → 0.6, 4 → 0.4, 5 → 0.2
}
```

---

### Вопрос 10: Бюджет

**Секция**: Практические вопросы
**Тип**: Range Slider
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     💰 Какой бюджет вы рассматриваете?                                     │
│                                                                             │
│     Укажите комфортный диапазон ежемесячной оплаты                         │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │       1 млн                                        15+ млн      │   │
│     │          │                                              │       │   │
│     │          ○━━━━━━━━━━━━●━━━━━━━━━━━━━●━━━━━━━━━━━━━━━━○       │   │
│     │                       │              │                          │   │
│     │                      min            max                         │   │
│     │                                                                  │   │
│     │                                                                  │   │
│     │          ┌───────────────────────────────────────────────┐      │   │
│     │          │                                               │      │   │
│     │          │    от  3 000 000   до  7 000 000  сум        │      │   │
│     │          │                                               │      │   │
│     │          │    ≈ от $240  до  $560  /месяц               │      │   │
│     │          │                                               │      │   │
│     │          └───────────────────────────────────────────────┘      │   │
│     │                                                                  │   │
│     │                                                                  │   │
│     │    ┌────────────────────────────────────────────────────────┐   │   │
│     │    │  📊 В этом диапазоне:                                  │   │   │
│     │    │                                                        │   │   │
│     │    │  • 34 школы                                           │   │   │
│     │    │  • Средний рейтинг: 4.2 ⭐                             │   │   │
│     │    │  • Включает: Cambridge, Национальная+                 │   │   │
│     │    │                                                        │   │   │
│     │    └────────────────────────────────────────────────────────┘   │   │
│     │                                                                  │   │
│     │                                                                  │   │
│     │    ☐ Готов(а) рассмотреть варианты чуть дороже,                │   │
│     │      если школа идеально подходит                               │   │
│     │                                                                  │   │
│     │    ☐ Интересуют скидки и программы грантов                      │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const budgetConfig = {
  min: 1_000_000,
  max: 15_000_000,
  step: 500_000,
  defaultRange: [3_000_000, 7_000_000],
  exchangeRate: 12_500, // UZS to USD
  
  // Категории для статистики
  categories: [
    { max: 2_000_000, label: 'Эконом', schoolCount: 15 },
    { max: 4_000_000, label: 'Средний', schoolCount: 35 },
    { max: 7_000_000, label: 'Выше среднего', schoolCount: 28 },
    { max: 12_000_000, label: 'Премиум', schoolCount: 12 },
    { max: Infinity, label: 'Люкс', schoolCount: 5 }
  ]
};

interface BudgetAnswer {
  min: number;
  max: number;
  flexibleBudget: boolean;  // готов платить больше
  interestedInDiscounts: boolean;
}
```

---

### Вопрос 11: Локация

**Секция**: Практические вопросы
**Тип**: Multi-select dropdown + Single choice
**Обязательный**: ✅ Да

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     📍 Где удобно, чтобы находилась школа?                                 │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  Районы:                                                         │   │
│     │  ┌────────────────────────────────────────────────────────┐     │   │
│     │  │ 🔍 Найти район...                                  ▼  │     │   │
│     │  └────────────────────────────────────────────────────────┘     │   │
│     │                                                                  │   │
│     │  Выбрано: [Юнусабадский ×] [Мирзо-Улугбекский ×]               │   │
│     │           [+ рядом Яккасарайский]                               │   │
│     │                                                                  │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │                                                                  │   │
│     │  Максимальное время в пути:                                     │   │
│     │                                                                  │   │
│     │    ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐      │   │
│     │    │  15 мин  │  │  30 мин  │  │  45 мин  │  │  60 мин  │      │   │
│     │    │          │  │    ✓     │  │          │  │          │      │   │
│     │    └──────────┘  └──────────┘  └──────────┘  └──────────┘      │   │
│     │                                                                  │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │                                                                  │   │
│     │  Как ребёнок будет добираться?                                  │   │
│     │                                                                  │   │
│     │    ○ 🚗 Будем возить сами / такси                               │   │
│     │    ● 🚌 Нужен школьный транспорт                                │   │
│     │    ○ 🚶 Ребёнок будет ходить / ездить сам                       │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     💡 Выберите районы, откуда ребёнку удобно добираться                  │
│        (от дома, от работы родителей, от бабушки и т.д.)                  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const districts = [
  { id: 'yunusabad', name: 'Юнусабадский', name_uz: 'Yunusobod', adjacent: ['mirzo_ulugbek', 'shaykhantakhur'] },
  { id: 'mirzo_ulugbek', name: 'Мирзо-Улугбекский', name_uz: 'Mirzo Ulug\'bek', adjacent: ['yunusabad', 'yakkasaray', 'sergeli'] },
  { id: 'yakkasaray', name: 'Яккасарайский', name_uz: 'Yakkasaroy', adjacent: ['mirzo_ulugbek', 'mirabad'] },
  { id: 'chilanzar', name: 'Чиланзарский', name_uz: 'Chilonzor', adjacent: ['olmazar', 'sergeli'] },
  { id: 'sergeli', name: 'Сергелийский', name_uz: 'Sergeli', adjacent: ['mirzo_ulugbek', 'chilanzar'] },
  { id: 'uchtepa', name: 'Учтепинский', name_uz: 'Uchtepa', adjacent: ['olmazar', 'shaykhantakhur'] },
  { id: 'shaykhantakhur', name: 'Шайхантахурский', name_uz: 'Shayxontohur', adjacent: ['yunusabad', 'almazar'] },
  { id: 'olmazar', name: 'Олмазорский', name_uz: 'Olmazor', adjacent: ['chilanzar', 'uchtepa'] },
  { id: 'bektemir', name: 'Бектемирский', name_uz: 'Bektemir', adjacent: ['yakkasaray'] },
  { id: 'mirabad', name: 'Мирабадский', name_uz: 'Mirobod', adjacent: ['yakkasaray', 'yashnabad'] },
  { id: 'yashnabad', name: 'Яшнабадский', name_uz: 'Yashnobod', adjacent: ['mirabad', 'sergeli'] },
];

const travelTimeOptions = [
  { value: 15, label: '15 мин' },
  { value: 30, label: '30 мин' },
  { value: 45, label: '45 мин' },
  { value: 60, label: '60 мин' }
];

const transportOptions = [
  { value: 'self', icon: '🚗', label: 'Будем возить сами / такси', needsSchoolTransport: false },
  { value: 'school_bus', icon: '🚌', label: 'Нужен школьный транспорт', needsSchoolTransport: true },
  { value: 'independent', icon: '🚶', label: 'Ребёнок будет ходить / ездить сам', needsSchoolTransport: false }
];
```

---

### Вопрос 12: Дополнительные услуги

**Секция**: Практические вопросы
**Тип**: Toggle switches
**Обязательный**: ❌ Нет

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     🏫 Какие услуги важны?                                                 │
│                                                                             │
│     Включите то, без чего не рассматриваете школу                          │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │                                                                  │   │
│     │   🍽️  Питание в школе                                           │   │
│     │       Завтрак и/или обед                        [ ━━━● ] Да     │   │
│     │                                                                  │   │
│     │   ─────────────────────────────────────────────────────────     │   │
│     │                                                                  │   │
│     │   🕐  Продлёнка / After school                                  │   │
│     │       Группа продлённого дня после уроков       [ ━━━● ] Да     │   │
│     │                                                                  │   │
│     │   ─────────────────────────────────────────────────────────     │   │
│     │                                                                  │   │
│     │   👩‍⚕️  Медицинский кабинет                                      │   │
│     │       Врач или медсестра на постоянной основе   [ ○━━━ ] Неважно│   │
│     │                                                                  │   │
│     │   ─────────────────────────────────────────────────────────     │   │
│     │                                                                  │   │
│     │   🧠  Психолог / Логопед                                        │   │
│     │       Специалисты по развитию в штате           [ ○━━━ ] Неважно│   │
│     │                                                                  │   │
│     │   ─────────────────────────────────────────────────────────     │   │
│     │                                                                  │   │
│     │   🔒  Охрана / Безопасность                                     │   │
│     │       Охрана, пропускная система, камеры        [ ━━━● ] Да     │   │
│     │                                                                  │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│     💡 "Да" = школа обязательно должна иметь эту услугу                   │
│        "Неважно" = не влияет на подбор                                     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

### Вопрос 13: Что точно НЕ подходит (опционально)

**Секция**: Дополнительно
**Тип**: Multiple Choice
**Обязательный**: ❌ Нет

#### UI Wireframe

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     🚫 Есть ли что-то, что точно НЕ подходит?                              │
│                                                                             │
│     Отметьте, чтобы исключить из рекомендаций                              │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐   │
│     │                                                                  │   │
│     │  ☐ Очень большие классы (более 25 человек)                      │   │
│     │                                                                  │   │
│     │  ☐ Школы только для девочек / только для мальчиков              │   │
│     │                                                                  │   │
│     │  ☐ Школы с религиозным уклоном                                  │   │
│     │                                                                  │   │
│     │  ☐ Школы без своей территории / во дворах                       │   │
│     │                                                                  │   │
│     │  ☐ Школы младше 3 лет (новые, без истории)                      │   │
│     │                                                                  │   │
│     │  ☐ Школы без верификации на EduMap                              │   │
│     │                                                                  │   │
│     │  ─────────────────────────────────────────────────────────────  │   │
│     │                                                                  │   │
│     │  ☐ Нет ничего, что точно не подходит                            │   │
│     │                                                                  │   │
│     └─────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│                                                        [Пропустить]        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### Данные

```typescript
const exclusionOptions = [
  {
    value: 'large_classes',
    label: 'Очень большие классы (более 25 человек)',
    filter: { max_class_size: 25 }
  },
  {
    value: 'single_gender',
    label: 'Школы только для девочек / только для мальчиков',
    filter: { exclude_tags: ['girls_only', 'boys_only'] }
  },
  {
    value: 'religious',
    label: 'Школы с религиозным уклоном',
    filter: { exclude_tags: ['religious', 'islamic', 'christian'] }
  },
  {
    value: 'no_campus',
    label: 'Школы без своей территории / во дворах',
    filter: { requires: ['own_building'] }
  },
  {
    value: 'new_school',
    label: 'Школы младше 3 лет (новые, без истории)',
    filter: { min_years_operating: 3 }
  },
  {
    value: 'not_verified',
    label: 'Школы без верификации на EduMap',
    filter: { requires: ['verified'] }
  },
  {
    value: 'none',
    label: 'Нет ничего, что точно не подходит',
    exclusive: true
  }
];
```

---

## 3. Навигация анкеты

### Progress Bar

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ●━━━━●━━━━●━━━━●━━━━○━━━━○━━━━○━━━━○━━━━○━━━━○━━━━○                        │
│  1    2    3    4    5    6    7    8    9   10   11                        │
│                                                                             │
│  Шаг 4 из 11                                          Секция: О РЕБЁНКЕ    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

ЦВЕТА:
● Заполнено — #3B82F6 (blue-500)
━ Линия заполнено — #3B82F6
○ Не заполнено — #E5E7EB (gray-200)
━ Линия не заполнено — #E5E7EB
```

### Кнопки навигации

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  [← Назад]                                              [Далее →]          │
│                                                                             │
│  ──────────────────────────────────────────────────────────────────────────│
│                                                                             │
│  Desktop: кнопки внизу контентной области                                  │
│  Mobile: sticky footer                                                      │
│                                                                             │
│  "Далее" активна только когда вопрос заполнен (если обязательный)          │
│  "Назад" всегда активна (кроме первого вопроса)                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Анимации и микровзаимодействия

### Выбор варианта ответа

```css
/* При клике на вариант */
.option-card {
  transition: all 0.2s ease-out;
}

.option-card:active {
  transform: scale(0.98);
}

.option-card.selected {
  animation: selectPulse 0.3s ease-out;
}

@keyframes selectPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* Checkmark появление */
.checkmark {
  animation: checkmarkAppear 0.3s ease-out;
}

@keyframes checkmarkAppear {
  0% { 
    opacity: 0;
    transform: scale(0) rotate(-45deg);
  }
  100% { 
    opacity: 1;
    transform: scale(1) rotate(0);
  }
}
```

### Переход между вопросами

```css
/* Slide transition */
.question-enter {
  opacity: 0;
  transform: translateX(30px);
}

.question-enter-active {
  opacity: 1;
  transform: translateX(0);
  transition: all 0.3s ease-out;
}

.question-exit {
  opacity: 1;
  transform: translateX(0);
}

.question-exit-active {
  opacity: 0;
  transform: translateX(-30px);
  transition: all 0.3s ease-out;
}
```

### Drag & Drop (Ranking)

```css
/* При перетаскивании */
.dragging {
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  transform: rotate(2deg);
  z-index: 100;
}

/* Drop zone highlight */
.drop-zone-active {
  background: #EFF6FF;
  border: 2px dashed #3B82F6;
}
```

---

## 5. Сохранение прогресса

### Auto-save

```typescript
// Сохраняем каждый ответ автоматически
function onAnswerChange(questionId: string, answer: any) {
  // Сохранить в localStorage
  saveToLocalStorage({
    questionId,
    answer,
    timestamp: Date.now()
  });
  
  // Если пользователь авторизован — синхронизировать с сервером
  if (isAuthenticated) {
    debouncedSyncToServer();
  }
}

// При возвращении показать диалог
function onReturn() {
  const savedProgress = loadFromLocalStorage();
  
  if (savedProgress && savedProgress.length > 0) {
    showDialog({
      title: 'Продолжить заполнение?',
      message: `Вы заполнили ${savedProgress.length} из 11 вопросов`,
      actions: [
        { label: 'Продолжить', onClick: restoreProgress },
        { label: 'Начать заново', onClick: clearProgress }
      ]
    });
  }
}
```

---

## 6. Валидация

### Правила валидации по вопросам

| Вопрос | Валидация |
|--------|-----------|
| Класс | Обязательно выбрать |
| Характер | Обязательно выбрать |
| Интересы | Опционально |
| Языки | Минимум 1 язык |
| Особенности | Опционально |
| Цель образования | Обязательно |
| Строгость/комфорт | Обязательно (default 50) |
| Программа | Обязательно |
| Приоритеты | Обязательно (default order) |
| Бюджет | Обязательно (min < max) |
| Локация | Минимум 1 район |
| Услуги | Опционально |
| Исключения | Опционально |

### Сообщения об ошибках

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚠️ Пожалуйста, выберите хотя бы один вариант                  │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  ⚠️ Минимальный бюджет не может быть больше максимального      │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  ⚠️ Выберите хотя бы один район                                │
└─────────────────────────────────────────────────────────────────┘
```

---

*Версия 1.0 — Декабрь 2024*
