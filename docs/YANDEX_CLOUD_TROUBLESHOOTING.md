# Решение проблем с Yandex Cloud Storage

## Ошибка: "The specified bucket does not exist"

Если вы получаете эту ошибку, хотя bucket создан, проверьте следующее:

### 1. Права доступа сервисного аккаунта

Убедитесь, что сервисный аккаунт имеет роль `storage.editor` или `storage.admin`:

1. Откройте Yandex Cloud Console
2. Перейдите в **IAM** → **Сервисные аккаунты**
3. Найдите ваш сервисный аккаунт
4. Перейдите на вкладку **Роли**
5. Убедитесь, что есть роль `storage.editor` или `storage.admin`

Если роли нет:
1. Нажмите **Назначить роли**
2. Выберите роль: **storage.editor**
3. Нажмите **Сохранить**

### 2. Права доступа к конкретному bucket

Дополнительно можно назначить права на уровне bucket:

1. Откройте ваш bucket в Object Storage
2. Перейдите в **Права доступа**
3. Нажмите **Добавить**
4. Выберите **Сервисный аккаунт**
5. Найдите ваш сервисный аккаунт
6. Выберите роль: **Редактор** (Editor) или **Администратор** (Admin)
7. Нажмите **Добавить**

### 3. Проверка имени bucket

Убедитесь, что имя bucket в `.env.local` точно совпадает с именем в консоли:
- Имя bucket чувствительно к регистру
- Не должно быть лишних пробелов
- Проверьте, что нет опечаток

### 4. Каталог (Folder)

Если bucket находится в определенном каталоге, убедитесь, что сервисный аккаунт имеет права на этот каталог или сам bucket.

### 5. Правильность ключей доступа

Проверьте, что:
- Access Key ID начинается с `YCAJ...` или `YCAN...`
- Secret Access Key не пустой
- Ключи созданы для правильного сервисного аккаунта

### 6. Регион

Убедитесь, что регион в `.env.local` совпадает с регионом bucket (хотя это обычно не критично для Yandex Cloud).

---

## Тестирование прав доступа

Попробуйте использовать AWS CLI для проверки:

```bash
aws configure
# Введите ваши credentials
aws --endpoint-url=https://storage.yandexcloud.net s3 ls s3://edumap
```

Если команда работает, значит проблема в коде. Если нет - проблема в правах доступа или credentials.

